import{d as c,u as f,r as p,a as b,o as m,b as g,c as v,w,e as y,f as s,g as h,h as i,v as u,t as x,i as _}from"./index-P1nWHzy5.js";import{_ as k}from"./AppLayout.vue_vue_type_script_setup_true_lang-WdIzkHR3.js";const V={class:"bg-white p-8 rounded-lg shadow-lg max-w-md mx-auto mt-20"},M=["disabled"],T=c({__name:"Login",setup(B){const l=g(),n=f(),e=p(!1),t=b({username:"",password:""}),d=async()=>{if(!e.value){e.value=!0;try{const a=await _.login(t);n.setToken(a),l.push("/nav")}catch(a){console.error("Login failed:",a),alert("登录失败")}finally{e.value=!1}}};return m(async()=>{if(console.log(n.token),n.token){e.value=!0;try{await n.validateToken()&&l.push("/nav")}finally{e.value=!1}}}),(a,o)=>(y(),v(k,null,{default:w(()=>[s("div",V,[o[2]||(o[2]=s("h1",{class:"text-4xl font-bold text-center mb-6 text-blue-900"},"欢迎登录",-1)),s("form",{onSubmit:h(d,["prevent"]),class:"space-y-6"},[i(s("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>t.username=r),type:"text",placeholder:"用户名",class:"w-full border-2 border-gray-200 focus:border-blue-500 py-3 rounded-lg focus:outline-none transition ease-in-out duration-300"},null,512),[[u,t.username]]),i(s("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>t.password=r),type:"password",placeholder:"密码",class:"w-full border-2 border-gray-200 focus:border-blue-500 py-3 rounded-lg focus:outline-none transition ease-in-out duration-300"},null,512),[[u,t.password]]),s("button",{type:"submit",disabled:e.value,class:"w-full bg-blue-500 text-white font-semibold py-3 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-300 disabled:opacity-50 disabled:cursor-not-allowed transform transition-transform hover:scale-105"},x(e.value?"登录中...":"登录"),9,M)],32)])]),_:1}))}});export{T as default};
